# Architecture:

Internal classic prometheus-stack.

Dedicated grafana to OnCall stack:

```
       +----------------------------------+                                +----------------------------------+
       |      K8S CLUSTER                 |                                |      K8S CLUSTER                 |
       |                                  |                                |                                  |
       |      US PROD                     |                                |      EU PROD                     |
       +----------------------------------+                                +----------------------------------+
       |                                  |                                |                                  |
       |                                  |                                |                                  |
       |                                  |                                |                                  |
       |                                  |                                |                                  |
       |   +---------------------------+  |                                |   +---------------------------+  |
       |   |  PROMETHEUS-STACK         |  |                                |   |  PROMETHEUS-STACK         |  |
       |   +---------------------------+  |                                |   +---------------------------+  |
+------+---+  ALERTMANAGER             |  |                        +-------+---+  ALERTMANAGER             |  |
|      |   |  GRAFANA                +-+--+ kubectl port-forward   |       |   |  GRAFANA                +-+--+ kubectl port-forward
|      |   |  PROMETHEUS             +-+--+                        |       |   |  PROMETHEUS             +-+--+
|      |   |                           |  |                        |       |   |                           |  |
|      |   +---------------------------+  |                        |       |   +---------------------------+  |
|      |                                  |                        |       |                                  |
|      |   +---------------------------+  |                        |       +----------------------------------+
|      |   |  ONCALL-STACK             |  |                        |
|      |   +---------------------------+  |                        |
|      |   |  GRAFANA                  |  |                        |
+------+---+->ONCALL-ENGINE<-----------+--+------------------------+
       |   |                           |  |
       |   +---------------------------+  |
       +---+----------+----------------+--+
                      |   INGRESS      |
                      |                |
                      +----------------+
                        - oncall-engine.hosted.mender.io
                        - oncall.hosted.mender.io
```
